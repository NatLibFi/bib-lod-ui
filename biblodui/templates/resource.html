{% extends "base.html" %}
{% block content %}
  <h1>{{ res.typename() }}: {{ res.name() }}</h1>
  <div class="uri">URI: <a href="{{ res.uri }}">{{ res.uri }}</a></div>
  
  <dl class="dl-horizontal">
  {% for prop,values in res.properties().items() %}
    <dt>{{ prop }}</dt>
    <dd>
      <ul class="list-unstyled">
      {% for val in values %}
        <li>
        {% if val.url %}
        <a href="{{ val.url() }}">{{ val }}</a>
        {% else %}
        {{ val }}
        {% endif %}
        </li>
      {% endfor %}
      </ul>
    </dd>
  {% endfor %}
  </dl>
  
  {% if res.is_agent() %}
  <div class="container">
    <div class="row">
      
      <div class="col-md-4">
        <h2>Authored works</h2>
        {% if res.has_authored_works() %}
        <ul>
        {% for work in res.authored_works() %}
          <li><a href="{{ work.url() }}">{{ work.name() }}</a></li>
        {% endfor %}
        </ul>
        {% endif %}

      </div>
      
      <div class="col-md-4">
        <h2>Contributed works</h2>
        
        {% if res.has_contributed_works() %}
        <ul>
        {% for work in res.contributed_works() %}
          <li><a href="{{ work.url() }}">{{ work.name() }}</a></li>
        {% endfor %}
        </ul>
        {% endif %}
      </div>

      <div class="col-md-4">
        <h2>Works about {{ res.name() }}</h2>
  
        {% if res.has_works_about() %}
        <ul>
        {% for work in res.works_about() %}
          <li><a href="{{ work.url() }}">{{ work.name() }}</a></li>
        {% endfor %}
        </ul>
        {% endif %}
      </div>
    </div>
  </div>
  {% elif res.has_works_about() %}
  <h2>Works about {{ res.name() }}</h2>

  <ul>
  {% for work in res.works_about() %}
    <li><a href="{{ work.url() }}">{{ work.name() }}</a></li>
  {% endfor %}
  </ul>
  
  {% endif %}
  
  {% if res.has_instances() %}
  <h2>Editions</h2>
  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <ul class="nav nav-pills nav-stacked" role="tablist" id="instances">
        {% for inst in res.instances() %}
          <li role="presentation"><a href="#{{ inst.localname() }}" aria-controls="{{ inst.localname() }}" role="tab" data-toggle="tab">{{ inst.edition_info() }}</a></li>
        {% endfor %}
        </ul>
      </div>
      <div class="col-md-8">
        <div class="tab-content">  
        {% for inst in res.instances() %}
          <div role="tabpanel" class="tab-pane" id="{{ inst.localname() }}">
            {% if inst.finna_url() %}
            <div class="finna-link"><a href="{{ inst.finna_url() }}">View this in Finna</a></div>
            {% endif %}
            <h3>Instance: {{ inst.name() }}</h3>
            <div class="uri">URI: <a href="{{ inst.uri }}">{{ inst.uri }}</a></div>
            <dl class="dl-horizontal">
            {% for prop,values in inst.properties().items() %}
              <dt>{{ prop }}</dt>
              <dd>
                <ul class="list-unstyled">
                {% for val in values %}
                  <li>
                    {% if val.items %}
                    {% for p, vals in val.items() %}
                      <strong>{{ p }}:</strong>
                      {% for v in vals %}
                      {{ v }}
                      {% endfor %}
                    {% endfor %}
                    {% elif val.url and val.url() %}
                    <a href="{{ val.url() }}">{{ val }}</a>
                    {% else %}
                    {{ val }}
                    {% endif %}
                  </li>
                {% endfor %}
                </ul>
              </dd>
            {% endfor %}
            </dl>
          </div>
        {% endfor %}
        </div>
      </div>
    </div>
  </div>
  {% endif %}
  
  <div class="download">
    Download this resource as RDF:
    <ul class="list-inline">
    <li><a href="{{ res.localname() }}.ttl">Turtle</a></li>
    <li><a href="{{ res.localname() }}.rdf">RDF/XML</a></li>
    <li><a href="{{ res.localname() }}.nt">N-Triples</a></li>
    <li><a href="{{ res.localname() }}.json">JSON-LD</a></li>
    </ul>
  
  </div>
  
{% endblock %}
